{"version":3,"sources":["圆周率计算-可设置圆周率位数-可选择线程个数-多线程大数框架webworker输出useragent大数框架/mypidashujisuan.js"],"names":["mytestpi","getConstpinewhighefficiency105","document","getElementById","value","jisuanfinishflag","threadgeshu","x","piwei","myptext","myshurukuangneirong","navigator","userAgent","onclick","mystart","worker1","Math","floor","title","eventdata","String","Decimal","precision","strt","Date","getTime","p","myworker","length","finishflag","Worker","i","len","forEach","currentValue","index","arr","undefined","postMessage","onmessage","event","console","log","data","p1","add","max","parseInt","threadfinish","alert","filter","endt","durt","terminate","setTimeout","style","height","scrollHeight","onload"],"mappings":";AAEA,SAASA,IAERC,IAGD,SAASA,IACRC,SAASC,eAAe,UAAUC,MAAQ,EAC1CF,SAASC,eAAe,cAAcC,MAAQ,EAC9CC,iBAAmB,EACnBC,YAAc,EACdC,EAAI,EACJC,MAAQ,IACRC,QAAUP,SAASC,eAAe,MAClCO,oBAAsB,IACtBA,oBAAsBA,oBAAsB,cAAgBC,UAAUC,UAAY,KAClFF,qBAA4C,eAC5CD,QAAQL,MAAQM,oBAChBR,SAASC,eAAe,SAASU,QAAUC,EAI5C,SAASA,IAIJZ,GAFJG,iBAAmB,EAEfH,SAASC,eAAe,UAAUC,OAAS,GAAKF,SAASC,eAAe,UAAUC,OAAS,IAAMF,SAASC,eAC5G,cAAcC,OAAS,GAAKF,SAASC,eAAe,cAAcC,OAAS,IAAK,CAsB7EW,IAAAA,EArBJP,MAAQ,IAAOQ,KAAKC,MAAMf,SAASC,eAAe,cAAcC,OAChEF,SAASC,eAAe,cAAcC,MAAQY,KAAKC,MAAMf,SAASC,eAAe,cAAcC,OAC/FE,YAAcU,KAAKC,MAAMf,SAASC,eAAe,UAAUC,OAC3DF,SAASC,eAAe,UAAUC,MAAQE,YAC1CJ,SAASgB,MAAQhB,SAASgB,MAAQ,QAAeZ,YACjDI,oBAAsBA,oBAAsB,OAASJ,YAAc,KACnEG,QAAQL,MAAQM,oBAChBS,UAAY,QAAUX,MAAQ,wBAE9BE,qBAAuBU,OAAOD,WAC9BV,QAAQL,MAAQM,oBAChBW,QAAQC,UAAYd,MAEpBe,MAAO,IAAIC,MAAOC,UAClBC,EAAI,IAAIL,QAAQ,GAEhBM,SAAW,GACXA,SAASC,OAAStB,YAElBuB,WAAa,GACbA,WAAWD,OAAStB,iBAEG,IAAZS,IACVA,EAAU,IAAIe,OAAO,yCAGjB,IAAA,IAAIC,EAAI,EAAGC,EAAM1B,YAAayB,EAAIC,EAAKD,IAC3CJ,SAASI,GAAKhB,EAGfY,SAASM,QAAQ,SAASC,EAAcC,EAAOC,GAE9CA,EAAID,QAASE,EAEbD,EAAID,GAAS,IAAIL,OAAO,wCACxBM,EAAID,GAAOG,YAAY,CAAC9B,MAAOF,YAAa6B,IAC5CC,EAAID,GAAOI,UAAY,SAASC,GAC/BC,QAAQC,IAAI,WAAaP,EAAQ,GAAK,iBAAwBK,EAAMG,MAChEC,IAAAA,EAAK,IAAIvB,QAAQmB,EAAMG,KAAK,IAChCjB,EAAIL,QAAQwB,IAAInB,EAAGkB,GACnBrC,EAAIS,KAAK8B,IAAIvC,EAAGwC,SAASP,EAAMG,KAAK,KACpCd,WAAWM,GAAS,EACpBa,YAMFC,MAAM,QACN/C,SAASC,eAAe,cAAcC,MAAQ,KAC9CF,SAASC,eAAe,UAAUC,MAAQ,KAK5C,SAAS4C,IAEJ1C,aAAeuB,WAAWqB,OAAO,SAAShB,GACrCA,OAAgB,GAAhBA,IAELN,SACHuB,MAAO,IAAI3B,MAAOC,UAClB2B,MAAQD,KAAO5B,MAAQ,IAEvBJ,UAAY,UAAYiC,KAAO,KAAO7C,EAAI,WAAkBC,MAAQ,QAAekB,EAAI,OACvFjB,QAAUP,SAASC,eAAe,MAClCO,qBAAuBU,OAAOD,WAC9BV,QAAQL,MAAQM,oBAChBL,iBAAmB,EACnBsB,SAASM,QAAQ,SAASC,EAAcC,EAAOC,GAC9CA,EAAID,GAAOkB,cAEZ9C,EAAI,EAEJ+C,WAAW,WACV7C,QAAQ8C,MAAMC,OAAS/C,QAAQgD,aAAe,MAC5C,IAzGLC,OAAS1D","file":"mypidashujisuan.0136bf15.js","sourceRoot":"..","sourcesContent":["onload = mytestpi;\r\n\r\nfunction mytestpi() {\r\n\r\n\tgetConstpinewhighefficiency105()\r\n};\r\n\r\nfunction getConstpinewhighefficiency105() {\r\n\tdocument.getElementById(\"thread\").value = 8\r\n\tdocument.getElementById(\"pichangwei\").value = 3\r\n\tjisuanfinishflag = 1;\r\n\tthreadgeshu = 8\r\n\tx = 0;\r\n\tpiwei = 3000;\r\n\tmyptext = document.getElementById(\"tp\");\r\n\tmyshurukuangneirong = \" \";\r\n\tmyshurukuangneirong = myshurukuangneirong + \"UserAgent: \" + navigator.userAgent + \"\\n\";\r\n\tmyshurukuangneirong = myshurukuangneirong + \"开始圆周率多线程测试\\n\";\r\n\tmyptext.value = myshurukuangneirong;\r\n\tdocument.getElementById(\"start\").onclick = mystart;\r\n\r\n}\r\n\r\nfunction mystart() {\r\n\r\n\tjisuanfinishflag = 0;\r\n\r\n\tif (document.getElementById(\"thread\").value >= 1 && document.getElementById(\"thread\").value <= 12 && document.getElementById(\r\n\t\t\t\"pichangwei\").value >= 1 && document.getElementById(\"pichangwei\").value <= 100) {\r\n\t\tpiwei = 1000 * Math.floor(document.getElementById(\"pichangwei\").value);\r\n\t\tdocument.getElementById(\"pichangwei\").value = Math.floor(document.getElementById(\"pichangwei\").value)\r\n\t\tthreadgeshu = Math.floor(document.getElementById(\"thread\").value)\r\n\t\tdocument.getElementById(\"thread\").value = threadgeshu\r\n\t\tdocument.title = document.title + \"-\" + \"线程数为\" + threadgeshu\r\n\t\tmyshurukuangneirong = myshurukuangneirong + \"线程数为\" + threadgeshu + \"\\n\";\r\n\t\tmyptext.value = myshurukuangneirong;\r\n\t\teventdata = \"圆周率计算\" + piwei + \"位\" + \"  \\n\" + \"计算圆周率中......\" + \"  \\n\";\r\n\r\n\t\tmyshurukuangneirong += String(eventdata);\r\n\t\tmyptext.value = myshurukuangneirong;\r\n\t\tDecimal.precision = piwei;\r\n\r\n\t\tstrt = new Date().getTime();\r\n\t\tp = new Decimal(0);\r\n\r\n\t\tmyworker = []\r\n\t\tmyworker.length = threadgeshu;\r\n\r\n\t\tfinishflag = []\r\n\t\tfinishflag.length = threadgeshu;\r\n\t\tvar worker1;\r\n\t\tif (typeof(worker1) == \"undefined\") {\r\n\t\t\tworker1 = new Worker(\"mythread1.js\")\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, len = threadgeshu; i < len; i++) {\r\n\t\t\tmyworker[i] = worker1;\r\n\t\t}\r\n\r\n\t\tmyworker.forEach(function(currentValue, index, arr) {\r\n\r\n\t\t\tarr[index] = undefined;\r\n\r\n\t\t\tarr[index] = new Worker(\"mythread1.js\")\r\n\t\t\tarr[index].postMessage([piwei, threadgeshu, index]);\r\n\t\t\tarr[index].onmessage = function(event) {\r\n\t\t\t\tconsole.log(\"主线程从副线程\" + (index + 1) + \"接收\" + \"event.data\\n\" + event.data);\r\n\t\t\t\tvar p1 = new Decimal(event.data[0]);\r\n\t\t\t\tp = Decimal.add(p, p1);\r\n\t\t\t\tx = Math.max(x, parseInt(event.data[1]))\r\n\t\t\t\tfinishflag[index] = 1;\r\n\t\t\t\tthreadfinish()\r\n\t\t\t};\r\n\r\n\t\t});\r\n\r\n\t} else {\r\n\t\talert(\"输入错误\")\r\n\t\tdocument.getElementById(\"pichangwei\").value = null\r\n\t\tdocument.getElementById(\"thread\").value = null\r\n\t}\r\n\r\n}\r\n\r\nfunction threadfinish() {\r\n\r\n\tif (threadgeshu == finishflag.filter(function(currentValue) {\r\n\t\t\treturn currentValue == 1;\r\n\r\n\t\t}).length) {\r\n\t\tendt = new Date().getTime();\r\n\t\tdurt = (endt - strt) / 1000;\r\n\r\n\t\teventdata = \"计算完成,用时\" + durt + \"秒第\" + x + \"次  \\n\" + \"圆周率\" + piwei + \"位\" + \"  \\n\" + p + \"  \\n\";\r\n\t\tmyptext = document.getElementById(\"tp\");\r\n\t\tmyshurukuangneirong += String(eventdata);\r\n\t\tmyptext.value = myshurukuangneirong;\r\n\t\tjisuanfinishflag = 1;\r\n\t\tmyworker.forEach(function(currentValue, index, arr) {\r\n\t\t\tarr[index].terminate()\r\n\t\t})\r\n\t\tx = 0\r\n\t\t//alert(\"ok\")\r\n\t\tsetTimeout(function() {\r\n\t\t\tmyptext.style.height = myptext.scrollHeight + 'px';\r\n\t\t}, 0);\r\n\r\n\t}\r\n}\n"]}