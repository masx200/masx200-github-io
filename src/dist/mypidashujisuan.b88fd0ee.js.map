{"version":3,"sources":["圆周率计算-可设置圆周率位数-可选择线程个数-多线程大数框架webworker输出useragent大数框架/mypidashujisuan.js"],"names":["myptext","myshurukuangneirong","p","threadgeshu","x","piwei","myworker","eventdata","strt","finishflag","endt","mystart","document","getElementById","value","worker1","Math","floor","title","String","Decimal","precision","Date","getTime","length","Worker","i","len","forEach","currentValue","index","arr","undefined","postMessage","onmessage","event","console","log","data","p1","add","max","parseInt","filter","terminate","setTimeout","style","height","scrollHeight","alert","window","onload","mytestpi","navigator","userAgent","onclick"],"mappings":";CAAA,WAEQA,IAAAA,EAASC,EAAoBC,EAAGC,EAAaC,EAAGC,EAAMC,EAASC,EAAUC,EAAKC,EAAgBC,EAyBzFC,SAAAA,IAIDC,GAAAA,SAASC,eAAe,UAAUC,OAAS,GAAKF,SAASC,eAAe,UAAUC,OAAS,IAAMF,SAASC,eACtG,cAAcC,OAAS,GAAKF,SAASC,eAAe,cAAcC,OAAS,IAAK,CAsBhFC,IAAAA,EArBJV,EAAQ,IAAOW,KAAKC,MAAML,SAASC,eAAe,cAAcC,OAChEF,SAASC,eAAe,cAAcC,MAAQE,KAAKC,MAAML,SAASC,eAAe,cAAcC,OAC/FX,EAAca,KAAKC,MAAML,SAASC,eAAe,UAAUC,OAC3DF,SAASC,eAAe,UAAUC,MAAQX,EAC1CS,SAASM,MAAQ,gBAA4Bf,EAC7CF,EAAsBA,EAAsB,OAASE,EAAc,KACnEH,EAAQc,MAAQb,EAChBM,EAAY,QAAUF,EAAQ,wBAE9BJ,GAAuBkB,OAAOZ,GAC9BP,EAAQc,MAAQb,EAChBmB,QAAQC,UAAYhB,EAEpBG,GAAO,IAAIc,MAAOC,UAClBrB,EAAI,IAAIkB,QAAQ,IAEhBd,EAAW,IACFkB,OAASrB,GAElBM,EAAa,IACFe,OAASrB,OAEI,IAAZY,IACRA,EAAU,IAAIU,OAAO,yCAGpB,IAAA,IAAIC,EAAI,EAAGC,EAAMxB,EAAauB,EAAIC,EAAKD,IACxCpB,EAASoB,GAAKX,EAGlBT,EAASsB,QAAQ,SAAUC,EAAcC,EAAOC,GAE5CA,EAAID,QAASE,EAEbD,EAAID,GAAS,IAAIL,OAAO,wCACxBM,EAAID,GAAOG,YAAY,CAAC5B,EAAOF,EAAa2B,IAC5CC,EAAID,GAAOI,UAAY,SAAUC,GAC7BC,QAAQC,IAAI,WAAaP,EAAQ,GAAK,iBAAwBK,EAAMG,MAChEC,IAAAA,EAAK,IAAInB,QAAQe,EAAMG,KAAK,IAChCpC,EAAIkB,QAAQoB,IAAItC,EAAGqC,GACnBnC,EAAIY,KAAKyB,IAAIrC,EAAGsC,SAASP,EAAMG,KAAK,KACpC7B,EAAWqB,GAAS,EAgB5B3B,GAAeM,EAAWkC,OAAO,SAAUd,GAChCA,OAAgB,GAAhBA,IAERL,SACHd,GAAO,IAAIY,MAAOC,UAGlBhB,EAAY,WAFJG,EAAOF,GAAQ,IAEQ,KAAOJ,EAAI,WAAkBC,EAAQ,QAAeH,EAAI,OACvFF,EAAUY,SAASC,eAAe,MAClCZ,GAAuBkB,OAAOZ,GAC9BP,EAAQc,MAAQb,EAEhBK,EAASsB,QAAQ,SAAUC,EAAcC,EAAOC,GAC5CA,EAAID,GAAOc,cAEfxC,EAAI,EAEJyC,WAAW,WACP7C,EAAQ8C,MAAMC,OAAS/C,EAAQgD,aAAe,MAC/C,YA5BHC,MAAM,QACNrC,SAASC,eAAe,cAAcC,MAAQ,KAC9CF,SAASC,eAAe,UAAUC,MAAQ,KAlFlDoC,OAAOC,OAGEC,WAMLxC,SAASC,eAAe,UAAUC,MAAQ,EAC1CF,SAASC,eAAe,cAAcC,MAAQ,EAE9CX,EAAc,EACdC,EAAI,EAEJJ,EAAUY,SAASC,eAAe,MAGlCZ,GADAA,GADAA,EAAsB,KACsB,cAAgBoD,UAAUC,UAAY,MACtC,eAC5CtD,EAAQc,MAAQb,EAChBW,SAASC,eAAe,SAAS0C,QAAU5C,EAC3CkC,WAAW,WACP7C,EAAQ8C,MAAMC,OAAS/C,EAAQgD,aAAe,MAC/C,IAxBX","file":"mypidashujisuan.b88fd0ee.js","sourceRoot":"..","sourcesContent":["(() => {\r\n    window.onload = mytestpi;\r\n    var myptext, myshurukuangneirong,p, threadgeshu, x, piwei,myworker,eventdata,strt,finishflag,durt,endt;\r\n\r\n    function mytestpi() {\r\n\r\n        getConstpinewhighefficiency105()\r\n    };\r\n\r\n    function getConstpinewhighefficiency105() {\r\n        document.getElementById(\"thread\").value = 8\r\n        document.getElementById(\"pichangwei\").value = 3\r\n        // jisuanfinishflag = 1;\r\n        threadgeshu = 8\r\n        x = 0;\r\n        // piwei = 3000;\r\n        myptext = document.getElementById(\"tp\");\r\n        myshurukuangneirong = \" \";\r\n        myshurukuangneirong = myshurukuangneirong + \"UserAgent: \" + navigator.userAgent + \"\\n\";\r\n        myshurukuangneirong = myshurukuangneirong + \"开始圆周率多线程测试\\n\";\r\n        myptext.value = myshurukuangneirong;\r\n        document.getElementById(\"start\").onclick = mystart;\r\n        setTimeout(function () {\r\n            myptext.style.height = myptext.scrollHeight + 'px';\r\n        }, 0);\r\n    }\r\n\r\n    function mystart() {\r\n\r\n        // jisuanfinishflag = 0;\r\n\r\n        if (document.getElementById(\"thread\").value >= 1 && document.getElementById(\"thread\").value <= 12 && document.getElementById(\r\n                \"pichangwei\").value >= 1 && document.getElementById(\"pichangwei\").value <= 100) {\r\n            piwei = 1000 * Math.floor(document.getElementById(\"pichangwei\").value);\r\n            document.getElementById(\"pichangwei\").value = Math.floor(document.getElementById(\"pichangwei\").value)\r\n            threadgeshu = Math.floor(document.getElementById(\"thread\").value)\r\n            document.getElementById(\"thread\").value = threadgeshu\r\n            document.title = '圆周率计算多线程' + \"-\" + \"线程数为\" + threadgeshu\r\n            myshurukuangneirong = myshurukuangneirong + \"线程数为\" + threadgeshu + \"\\n\";\r\n            myptext.value = myshurukuangneirong;\r\n            eventdata = \"圆周率计算\" + piwei + \"位\" + \"  \\n\" + \"计算圆周率中......\" + \"  \\n\";\r\n\r\n            myshurukuangneirong += String(eventdata);\r\n            myptext.value = myshurukuangneirong;\r\n            Decimal.precision = piwei;\r\n\r\n            strt = new Date().getTime();\r\n            p = new Decimal(0);\r\n\r\n            myworker = []\r\n            myworker.length = threadgeshu;\r\n\r\n            finishflag = []\r\n            finishflag.length = threadgeshu;\r\n            var worker1;\r\n            if (typeof (worker1) == \"undefined\") {\r\n                worker1 = new Worker(\"mythread1.js\")\r\n            }\r\n\r\n            for (var i = 0, len = threadgeshu; i < len; i++) {\r\n                myworker[i] = worker1;\r\n            }\r\n\r\n            myworker.forEach(function (currentValue, index, arr) {\r\n\r\n                arr[index] = undefined;\r\n\r\n                arr[index] = new Worker(\"mythread1.js\")\r\n                arr[index].postMessage([piwei, threadgeshu, index]);\r\n                arr[index].onmessage = function (event) {\r\n                    console.log(\"主线程从副线程\" + (index + 1) + \"接收\" + \"event.data\\n\" + event.data);\r\n                    var p1 = new Decimal(event.data[0]);\r\n                    p = Decimal.add(p, p1);\r\n                    x = Math.max(x, parseInt(event.data[1]))\r\n                    finishflag[index] = 1;\r\n                    threadfinish()\r\n                };\r\n\r\n            });\r\n\r\n        } else {\r\n            alert(\"输入错误\")\r\n            document.getElementById(\"pichangwei\").value = null\r\n            document.getElementById(\"thread\").value = null\r\n        }\r\n\r\n    }\r\n\r\n    function threadfinish() {\r\n\r\n        if (threadgeshu == finishflag.filter(function (currentValue) {\r\n                return currentValue == 1;\r\n\r\n            }).length) {\r\n            endt = new Date().getTime();\r\n            durt = (endt - strt) / 1000;\r\n\r\n            eventdata = \"计算完成,用时\" + durt + \"秒第\" + x + \"次  \\n\" + \"圆周率\" + piwei + \"位\" + \"  \\n\" + p + \"  \\n\";\r\n            myptext = document.getElementById(\"tp\");\r\n            myshurukuangneirong += String(eventdata);\r\n            myptext.value = myshurukuangneirong;\r\n            // jisuanfinishflag = 1;\r\n            myworker.forEach(function (currentValue, index, arr) {\r\n                arr[index].terminate()\r\n            })\r\n            x = 0\r\n            //alert(\"ok\")\r\n            setTimeout(function () {\r\n                myptext.style.height = myptext.scrollHeight + 'px';\r\n            }, 0);\r\n\r\n        }\r\n    }\r\n})()"]}