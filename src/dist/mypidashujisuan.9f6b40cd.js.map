{"version":3,"sources":["圆周率计算-可设置圆周率位数-可选择线程个数-多线程大数框架webworker输出useragent大数框架/mypidashujisuan.js"],"names":["myptext","myshurukuangneirong","threadgeshu","x","piwei","myworker","mystart","document","getElementById","value","worker1","Math","floor","title","eventdata","String","Decimal","precision","strt","Date","getTime","p","length","finishflag","Worker","i","len","forEach","currentValue","index","arr","undefined","postMessage","onmessage","event","console","log","data","p1","add","max","parseInt","filter","endt","durt","terminate","setTimeout","style","height","scrollHeight","alert","window","onload","mytestpi","navigator","userAgent","onclick"],"mappings":";CAAA,WAEQA,IAAAA,EAASC,EAAuCC,EAAaC,EAAGC,EAAMC,EAyBjEC,SAAAA,IAIDC,GAFe,EAEfA,SAASC,eAAe,UAAUC,OAAS,GAAKF,SAASC,eAAe,UAAUC,OAAS,IAAMF,SAASC,eACtG,cAAcC,OAAS,GAAKF,SAASC,eAAe,cAAcC,OAAS,IAAK,CAsBhFC,IAAAA,EArBJN,EAAQ,IAAOO,KAAKC,MAAML,SAASC,eAAe,cAAcC,OAChEF,SAASC,eAAe,cAAcC,MAAQE,KAAKC,MAAML,SAASC,eAAe,cAAcC,OAC/FP,EAAcS,KAAKC,MAAML,SAASC,eAAe,UAAUC,OAC3DF,SAASC,eAAe,UAAUC,MAAQP,EAC1CK,SAASM,MAAQ,gBAA4BX,EAC7CD,EAAsBA,EAAsB,OAASC,EAAc,KACnEF,EAAQS,MAAQR,EAChBa,UAAY,QAAUV,EAAQ,wBAE9BH,GAAuBc,OAAOD,WAC9Bd,EAAQS,MAAQR,EAChBe,QAAQC,UAAYb,EAEpBc,MAAO,IAAIC,MAAOC,UAClBC,EAAI,IAAIL,QAAQ,IAEhBX,EAAW,IACFiB,OAASpB,EAElBqB,WAAa,GACbA,WAAWD,OAASpB,OAEI,IAAZQ,IACRA,EAAU,IAAIc,OAAO,yCAGpB,IAAA,IAAIC,EAAI,EAAGC,EAAMxB,EAAauB,EAAIC,EAAKD,IACxCpB,EAASoB,GAAKf,EAGlBL,EAASsB,QAAQ,SAAUC,EAAcC,EAAOC,GAE5CA,EAAID,QAASE,EAEbD,EAAID,GAAS,IAAIL,OAAO,wCACxBM,EAAID,GAAOG,YAAY,CAAC5B,EAAOF,EAAa2B,IAC5CC,EAAID,GAAOI,UAAY,SAAUC,GAC7BC,QAAQC,IAAI,WAAaP,EAAQ,GAAK,iBAAwBK,EAAMG,MAChEC,IAAAA,EAAK,IAAItB,QAAQkB,EAAMG,KAAK,IAChChB,EAAIL,QAAQuB,IAAIlB,EAAGiB,GACnBnC,EAAIQ,KAAK6B,IAAIrC,EAAGsC,SAASP,EAAMG,KAAK,KACpCd,WAAWM,GAAS,EAgB5B3B,GAAeqB,WAAWmB,OAAO,SAAUd,GAChCA,OAAgB,GAAhBA,IAERN,SACHqB,MAAO,IAAIxB,MAAOC,UAClBwB,MAAQD,KAAOzB,MAAQ,IAEvBJ,UAAY,UAAY8B,KAAO,KAAOzC,EAAI,WAAkBC,EAAQ,QAAeiB,EAAI,OACvFrB,EAAUO,SAASC,eAAe,MAClCP,GAAuBc,OAAOD,WAC9Bd,EAAQS,MAAQR,EACG,EACnBI,EAASsB,QAAQ,SAAUC,EAAcC,EAAOC,GAC5CA,EAAID,GAAOgB,cAEf1C,EAAI,EAEJ2C,WAAW,WACP9C,EAAQ+C,MAAMC,OAAShD,EAAQiD,aAAe,MAC/C,YA5BHC,MAAM,QACN3C,SAASC,eAAe,cAAcC,MAAQ,KAC9CF,SAASC,eAAe,UAAUC,MAAQ,KAlFlD0C,OAAOC,OAGEC,WAML9C,SAASC,eAAe,UAAUC,MAAQ,EAC1CF,SAASC,eAAe,cAAcC,MAAQ,EAC3B,EACnBP,EAAc,EACdC,EAAI,EAEJH,EAAUO,SAASC,eAAe,MAGlCP,GADAA,GADAA,EAAsB,KACsB,cAAgBqD,UAAUC,UAAY,MACtC,eAC5CvD,EAAQS,MAAQR,EAChBM,SAASC,eAAe,SAASgD,QAAUlD,EAC3CwC,WAAW,WACP9C,EAAQ+C,MAAMC,OAAShD,EAAQiD,aAAe,MAC/C,IAxBX","file":"mypidashujisuan.9f6b40cd.js","sourceRoot":"..","sourcesContent":["(() => {\r\n    window.onload = mytestpi;\r\n    var myptext, myshurukuangneirong, jisuanfinishflag, threadgeshu, x, piwei,myworker;\r\n\r\n    function mytestpi() {\r\n\r\n        getConstpinewhighefficiency105()\r\n    };\r\n\r\n    function getConstpinewhighefficiency105() {\r\n        document.getElementById(\"thread\").value = 8\r\n        document.getElementById(\"pichangwei\").value = 3\r\n        jisuanfinishflag = 1;\r\n        threadgeshu = 8\r\n        x = 0;\r\n        // piwei = 3000;\r\n        myptext = document.getElementById(\"tp\");\r\n        myshurukuangneirong = \" \";\r\n        myshurukuangneirong = myshurukuangneirong + \"UserAgent: \" + navigator.userAgent + \"\\n\";\r\n        myshurukuangneirong = myshurukuangneirong + \"开始圆周率多线程测试\\n\";\r\n        myptext.value = myshurukuangneirong;\r\n        document.getElementById(\"start\").onclick = mystart;\r\n        setTimeout(function () {\r\n            myptext.style.height = myptext.scrollHeight + 'px';\r\n        }, 0);\r\n    }\r\n\r\n    function mystart() {\r\n\r\n        jisuanfinishflag = 0;\r\n\r\n        if (document.getElementById(\"thread\").value >= 1 && document.getElementById(\"thread\").value <= 12 && document.getElementById(\r\n                \"pichangwei\").value >= 1 && document.getElementById(\"pichangwei\").value <= 100) {\r\n            piwei = 1000 * Math.floor(document.getElementById(\"pichangwei\").value);\r\n            document.getElementById(\"pichangwei\").value = Math.floor(document.getElementById(\"pichangwei\").value)\r\n            threadgeshu = Math.floor(document.getElementById(\"thread\").value)\r\n            document.getElementById(\"thread\").value = threadgeshu\r\n            document.title = '圆周率计算多线程' + \"-\" + \"线程数为\" + threadgeshu\r\n            myshurukuangneirong = myshurukuangneirong + \"线程数为\" + threadgeshu + \"\\n\";\r\n            myptext.value = myshurukuangneirong;\r\n            eventdata = \"圆周率计算\" + piwei + \"位\" + \"  \\n\" + \"计算圆周率中......\" + \"  \\n\";\r\n\r\n            myshurukuangneirong += String(eventdata);\r\n            myptext.value = myshurukuangneirong;\r\n            Decimal.precision = piwei;\r\n\r\n            strt = new Date().getTime();\r\n            p = new Decimal(0);\r\n\r\n            myworker = []\r\n            myworker.length = threadgeshu;\r\n\r\n            finishflag = []\r\n            finishflag.length = threadgeshu;\r\n            var worker1;\r\n            if (typeof (worker1) == \"undefined\") {\r\n                worker1 = new Worker(\"mythread1.js\")\r\n            }\r\n\r\n            for (var i = 0, len = threadgeshu; i < len; i++) {\r\n                myworker[i] = worker1;\r\n            }\r\n\r\n            myworker.forEach(function (currentValue, index, arr) {\r\n\r\n                arr[index] = undefined;\r\n\r\n                arr[index] = new Worker(\"mythread1.js\")\r\n                arr[index].postMessage([piwei, threadgeshu, index]);\r\n                arr[index].onmessage = function (event) {\r\n                    console.log(\"主线程从副线程\" + (index + 1) + \"接收\" + \"event.data\\n\" + event.data);\r\n                    var p1 = new Decimal(event.data[0]);\r\n                    p = Decimal.add(p, p1);\r\n                    x = Math.max(x, parseInt(event.data[1]))\r\n                    finishflag[index] = 1;\r\n                    threadfinish()\r\n                };\r\n\r\n            });\r\n\r\n        } else {\r\n            alert(\"输入错误\")\r\n            document.getElementById(\"pichangwei\").value = null\r\n            document.getElementById(\"thread\").value = null\r\n        }\r\n\r\n    }\r\n\r\n    function threadfinish() {\r\n\r\n        if (threadgeshu == finishflag.filter(function (currentValue) {\r\n                return currentValue == 1;\r\n\r\n            }).length) {\r\n            endt = new Date().getTime();\r\n            durt = (endt - strt) / 1000;\r\n\r\n            eventdata = \"计算完成,用时\" + durt + \"秒第\" + x + \"次  \\n\" + \"圆周率\" + piwei + \"位\" + \"  \\n\" + p + \"  \\n\";\r\n            myptext = document.getElementById(\"tp\");\r\n            myshurukuangneirong += String(eventdata);\r\n            myptext.value = myshurukuangneirong;\r\n            jisuanfinishflag = 1;\r\n            myworker.forEach(function (currentValue, index, arr) {\r\n                arr[index].terminate()\r\n            })\r\n            x = 0\r\n            //alert(\"ok\")\r\n            setTimeout(function () {\r\n                myptext.style.height = myptext.scrollHeight + 'px';\r\n            }, 0);\r\n\r\n        }\r\n    }\r\n})()"]}