{"version":3,"sources":["圆周率计算-可设置圆周率位数-可选择线程个数-多线程大数框架webworker输出useragent大数框架/mypidashujisuan.js"],"names":["mytestpi","getConstpinewhighefficiency105","document","getElementById","value","jisuanfinishflag","threadgeshu","x","piwei","myptext","myshurukuangneirong","navigator","userAgent","onclick","mystart","worker1","Math","floor","title","eventdata","String","Decimal","precision","strt","Date","getTime","p","myworker","length","finishflag","Worker","i","len","forEach","currentValue","index","arr","undefined","postMessage","onmessage","event","console","log","data","p1","add","max","parseInt","threadfinish","alert","filter","endt","durt","terminate","setTimeout","style","height","scrollHeight","onload"],"mappings":";AAEA,SAASA,IAELC,IAGJ,SAASA,IACLC,SAASC,eAAe,UAAUC,MAAQ,EAC1CF,SAASC,eAAe,cAAcC,MAAQ,EAC9CC,iBAAmB,EACnBC,YAAc,EACdC,EAAI,EACJC,MAAQ,IACRC,QAAUP,SAASC,eAAe,MAClCO,oBAAsB,IACtBA,oBAAsBA,oBAAsB,cAAgBC,UAAUC,UAAY,KAClFF,qBAA4C,eAC5CD,QAAQL,MAAQM,oBAChBR,SAASC,eAAe,SAASU,QAAUC,EAI/C,SAASA,IAIDZ,GAFJG,iBAAmB,EAEfH,SAASC,eAAe,UAAUC,OAAS,GAAKF,SAASC,eAAe,UAAUC,OAAS,IAAMF,SAASC,eAAe,cAAcC,OAAS,GAAKF,SAASC,eAAe,cAAcC,OAAS,IACtM,CAsBMW,IAAAA,EArBJP,MAAQ,IAAOQ,KAAKC,MAAMf,SAASC,eAAe,cAAcC,OAChEF,SAASC,eAAe,cAAcC,MAAQY,KAAKC,MAAMf,SAASC,eAAe,cAAcC,OAC/FE,YAAcU,KAAKC,MAAMf,SAASC,eAAe,UAAUC,OAC3DF,SAASC,eAAe,UAAUC,MAAQE,YAC1CJ,SAASgB,MAAQhB,SAASgB,MAAQ,QAAeZ,YACjDI,oBAAsBA,oBAAsB,OAASJ,YAAc,KACnEG,QAAQL,MAAQM,oBAChBS,UAAY,QAAUX,MAAQ,wBAE9BE,qBAAuBU,OAAOD,WAC9BV,QAAQL,MAAQM,oBAChBW,QAAQC,UAAYd,MAEpBe,MAAO,IAAIC,MAAOC,UAClBC,EAAI,IAAIL,QAAQ,GAEhBM,SAAW,GACXA,SAASC,OAAStB,YAElBuB,WAAa,GACbA,WAAWD,OAAStB,iBAEI,IAAZS,IACRA,EAAU,IAAIe,OAAO,yCAGpB,IAAA,IAAIC,EAAI,EAAGC,EAAM1B,YAAayB,EAAIC,EAAKD,IACxCJ,SAASI,GAAKhB,EAGlBY,SAASM,QAAQ,SAASC,EAAcC,EAAOC,GAE3CA,EAAID,QAASE,EAEbD,EAAID,GAAS,IAAIL,OAAO,wCACxBM,EAAID,GAAOG,YAAY,CAAC9B,MAAOF,YAAa6B,IAC5CC,EAAID,GAAOI,UAAY,SAASC,GAC5BC,QAAQC,IAAI,WAAaP,EAAQ,GAAK,iBAAwBK,EAAMG,MAChEC,IAAAA,EAAK,IAAIvB,QAAQmB,EAAMG,KAAK,IAChCjB,EAAIL,QAAQwB,IAAInB,EAAGkB,GACnBrC,EAAIS,KAAK8B,IAAIvC,EAAGwC,SAASP,EAAMG,KAAK,KACpCd,WAAWM,GAAS,EACpBa,YAORC,MAAM,QACN/C,SAASC,eAAe,cAAcC,MAAQ,KAC9CF,SAASC,eAAe,UAAUC,MAAQ,KAKlD,SAAS4C,IAED1C,aAAeuB,WAAWqB,OAAO,SAAShB,GACnCA,OAAgB,GAAhBA,IAERN,SACCuB,MAAO,IAAI3B,MAAOC,UAClB2B,MAAQD,KAAO5B,MAAQ,IAEvBJ,UAAY,UAAYiC,KAAO,KAAO7C,EAAI,WAAkBC,MAAQ,QAAekB,EAAI,OACvFjB,QAAUP,SAASC,eAAe,MAClCO,qBAAuBU,OAAOD,WAC9BV,QAAQL,MAAQM,oBAChBL,iBAAmB,EACnBsB,SAASM,QAAQ,SAASC,EAAcC,EAAOC,GAC3CA,EAAID,GAAOkB,cAEf9C,EAAI,EAEV+C,WAAW,WACD7C,QAAQ8C,MAAMC,OAAS/C,QAAQgD,aAAe,MAC/C,IA1GXC,OAAS1D","file":"mypidashujisuan.ef09a613.js","sourceRoot":"..","sourcesContent":["onload = mytestpi;\n\nfunction mytestpi() {\n\n    getConstpinewhighefficiency105()\n}\n;\nfunction getConstpinewhighefficiency105() {\n    document.getElementById(\"thread\").value = 8\n    document.getElementById(\"pichangwei\").value = 3\n    jisuanfinishflag = 1;\n    threadgeshu = 8\n    x = 0;\n    piwei = 3000;\n    myptext = document.getElementById(\"tp\");\n    myshurukuangneirong = \" \";\n    myshurukuangneirong = myshurukuangneirong + \"UserAgent: \" + navigator.userAgent + \"\\n\";\n    myshurukuangneirong = myshurukuangneirong + \"开始圆周率多线程测试\\n\";\n    myptext.value = myshurukuangneirong;\n    document.getElementById(\"start\").onclick = mystart;\n\n}\n\nfunction mystart() {\n\n    jisuanfinishflag = 0;\n   \n    if (document.getElementById(\"thread\").value >= 1 && document.getElementById(\"thread\").value <= 12 && document.getElementById(\"pichangwei\").value >= 1 && document.getElementById(\"pichangwei\").value <= 100\n    ) {\n        piwei = 1000 * Math.floor(document.getElementById(\"pichangwei\").value);\n        document.getElementById(\"pichangwei\").value = Math.floor(document.getElementById(\"pichangwei\").value)\n        threadgeshu = Math.floor(document.getElementById(\"thread\").value)\n        document.getElementById(\"thread\").value = threadgeshu\n        document.title = document.title + \"-\" + \"线程数为\" + threadgeshu\n        myshurukuangneirong = myshurukuangneirong + \"线程数为\" + threadgeshu + \"\\n\";\n        myptext.value = myshurukuangneirong;\n        eventdata = \"圆周率计算\" + piwei + \"位\" + \"  \\n\" + \"计算圆周率中......\" + \"  \\n\";\n\n        myshurukuangneirong += String(eventdata);\n        myptext.value = myshurukuangneirong;\n        Decimal.precision = piwei;\n\n        strt = new Date().getTime();\n        p = new Decimal(0);\n\n        myworker = []\n        myworker.length = threadgeshu;\n\n        finishflag = []\n        finishflag.length = threadgeshu;\n        var worker1;\n        if (typeof (worker1) == \"undefined\") {\n            worker1 = new Worker(\"mythread1.js\")\n        }\n\n        for (var i = 0, len = threadgeshu; i < len; i++) {\n            myworker[i] = worker1;\n        }\n\n        myworker.forEach(function(currentValue, index, arr) {\n\n            arr[index] = undefined;\n\n            arr[index] = new Worker(\"mythread1.js\")\n            arr[index].postMessage([piwei, threadgeshu, index]);\n            arr[index].onmessage = function(event) {\n                console.log(\"主线程从副线程\" + (index + 1) + \"接收\" + \"event.data\\n\" + event.data);\n                var p1 = new Decimal(event.data[0]);\n                p = Decimal.add(p, p1);\n                x = Math.max(x, parseInt(event.data[1]))\n                finishflag[index] = 1;\n                threadfinish()\n            }\n            ;\n\n        });\n\n    } else {\n        alert(\"输入错误\")\n        document.getElementById(\"pichangwei\").value = null\n        document.getElementById(\"thread\").value = null\n    }\n\n}\n\nfunction threadfinish() {\n\n    if (threadgeshu == finishflag.filter(function(currentValue) {\n        return currentValue == 1;\n\n    }).length) {\n        endt = new Date().getTime();\n        durt = (endt - strt) / 1000;\n\n        eventdata = \"计算完成,用时\" + durt + \"秒第\" + x + \"次  \\n\" + \"圆周率\" + piwei + \"位\" + \"  \\n\" + p + \"  \\n\";\n        myptext = document.getElementById(\"tp\");\n        myshurukuangneirong += String(eventdata);\n        myptext.value = myshurukuangneirong;\n        jisuanfinishflag = 1;\n        myworker.forEach(function(currentValue, index, arr) {\n            arr[index].terminate()\n        })\n        x = 0\n\t\t//alert(\"ok\")\n\t\tsetTimeout(function() {\n            myptext.style.height = myptext.scrollHeight + 'px';\n        }, 0);\n\t\t \n    }\n}\n"]}