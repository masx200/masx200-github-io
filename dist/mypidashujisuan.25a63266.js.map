{"version":3,"sources":["圆周率计算-可设置圆周率位数-可选择线程个数-多线程大数框架webworker输出useragent大数框架decimal-js-20190412/mypidashujisuan.js"],"names":["mytestpi","getConstpinewhighefficiency105","document","getElementById","value","jisuanfinishflag","threadgeshu","x","piwei","myptext","myshurukuangneirong","navigator","userAgent","onclick","mystart","worker1","Math","floor","title","eventdata","String","Decimal","precision","strt","Date","getTime","p","myworker","length","finishflag","Worker","i","len","forEach","currentValue","index","arr","undefined","postMessage","onmessage","event","console","log","data","p1","add","max","parseInt","threadfinish","alert","filter","endt","durt","terminate","setTimeout","style","height","scrollHeight","onload"],"mappings":";AAEA,SAASA,IAELC,IAGJ,SAASA,IACLC,SAASC,eAAe,UAAUC,MAAQ,EAC1CF,SAASC,eAAe,cAAcC,MAAQ,EAC9CC,iBAAmB,EACnBC,YAAc,EACdC,EAAI,EACJC,MAAQ,IACRC,QAAUP,SAASC,eAAe,MAClCO,oBAAsB,IACtBA,oBAAsBA,oBAAsB,cAAgBC,UAAUC,UAAY,KAClFF,qBAA4C,eAC5CD,QAAQL,MAAQM,oBAChBR,SAASC,eAAe,SAASU,QAAUC,EAI/C,SAASA,IAIDZ,GAFJG,iBAAmB,EAEfH,SAASC,eAAe,UAAUC,OAAS,GAAKF,SAASC,eAAe,UAAUC,OAAS,IAAMF,SAASC,eAAe,cAAcC,OAAS,GAAKF,SAASC,eAAe,cAAcC,OAAS,IACtM,CAsBMW,IAAAA,EArBJP,MAAQ,IAAOQ,KAAKC,MAAMf,SAASC,eAAe,cAAcC,OAChEF,SAASC,eAAe,cAAcC,MAAQY,KAAKC,MAAMf,SAASC,eAAe,cAAcC,OAC/FE,YAAcU,KAAKC,MAAMf,SAASC,eAAe,UAAUC,OAC3DF,SAASC,eAAe,UAAUC,MAAQE,YAC1CJ,SAASgB,MAAQhB,SAASgB,MAAQ,QAAeZ,YACjDI,oBAAsBA,oBAAsB,OAASJ,YAAc,KACnEG,QAAQL,MAAQM,oBAChBS,UAAY,QAAUX,MAAQ,wBAE9BE,qBAAuBU,OAAOD,WAC9BV,QAAQL,MAAQM,oBAChBW,QAAQC,UAAYd,MAEpBe,MAAO,IAAIC,MAAOC,UAClBC,EAAI,IAAIL,QAAQ,GAEhBM,SAAW,GACXA,SAASC,OAAStB,YAElBuB,WAAa,GACbA,WAAWD,OAAStB,iBAEI,IAAZS,IACRA,EAAU,IAAIe,OAAO,yCAGpB,IAAA,IAAIC,EAAI,EAAGC,EAAM1B,YAAayB,EAAIC,EAAKD,IACxCJ,SAASI,GAAKhB,EAGlBY,SAASM,QAAQ,SAASC,EAAcC,EAAOC,GAE3CA,EAAID,QAASE,EAEbD,EAAID,GAAS,IAAIL,OAAO,wCACxBM,EAAID,GAAOG,YAAY,CAAC9B,MAAOF,YAAa6B,IAC5CC,EAAID,GAAOI,UAAY,SAASC,GAC5BC,QAAQC,IAAI,WAAaP,EAAQ,GAAK,iBAAwBK,EAAMG,MAChEC,IAAAA,EAAK,IAAIvB,QAAQmB,EAAMG,KAAK,IAChCjB,EAAIL,QAAQwB,IAAInB,EAAGkB,GACnBrC,EAAIS,KAAK8B,IAAIvC,EAAGwC,SAASP,EAAMG,KAAK,KACpCd,WAAWM,GAAS,EACpBa,YAORC,MAAM,QACN/C,SAASC,eAAe,cAAcC,MAAQ,KAC9CF,SAASC,eAAe,UAAUC,MAAQ,KAKlD,SAAS4C,IAED1C,aAAeuB,WAAWqB,OAAO,SAAShB,GACnCA,OAAgB,GAAhBA,IAERN,SACCuB,MAAO,IAAI3B,MAAOC,UAClB2B,MAAQD,KAAO5B,MAAQ,IAEvBJ,UAAY,UAAYiC,KAAO,KAAO7C,EAAI,WAAkBC,MAAQ,QAAekB,EAAI,OACvFjB,QAAUP,SAASC,eAAe,MAClCO,qBAAuBU,OAAOD,WAC9BV,QAAQL,MAAQM,oBAChBL,iBAAmB,EACnBsB,SAASM,QAAQ,SAASC,EAAcC,EAAOC,GAC3CA,EAAID,GAAOkB,cAEf9C,EAAI,EAEV+C,WAAW,WACD7C,QAAQ8C,MAAMC,OAAS/C,QAAQgD,aAAe,MAC/C,IA1GXC,OAAS1D","file":"mypidashujisuan.25a63266.js","sourceRoot":"..","sourcesContent":["onload = mytestpi;\r\n\r\nfunction mytestpi() {\r\n\r\n    getConstpinewhighefficiency105()\r\n}\r\n;\r\nfunction getConstpinewhighefficiency105() {\r\n    document.getElementById(\"thread\").value = 8\r\n    document.getElementById(\"pichangwei\").value = 3\r\n    jisuanfinishflag = 1;\r\n    threadgeshu = 8\r\n    x = 0;\r\n    piwei = 3000;\r\n    myptext = document.getElementById(\"tp\");\r\n    myshurukuangneirong = \" \";\r\n    myshurukuangneirong = myshurukuangneirong + \"UserAgent: \" + navigator.userAgent + \"\\n\";\r\n    myshurukuangneirong = myshurukuangneirong + \"开始圆周率多线程测试\\n\";\r\n    myptext.value = myshurukuangneirong;\r\n    document.getElementById(\"start\").onclick = mystart;\r\n\r\n}\r\n\r\nfunction mystart() {\r\n\r\n    jisuanfinishflag = 0;\r\n   \r\n    if (document.getElementById(\"thread\").value >= 1 && document.getElementById(\"thread\").value <= 12 && document.getElementById(\"pichangwei\").value >= 1 && document.getElementById(\"pichangwei\").value <= 100\r\n    ) {\r\n        piwei = 1000 * Math.floor(document.getElementById(\"pichangwei\").value);\r\n        document.getElementById(\"pichangwei\").value = Math.floor(document.getElementById(\"pichangwei\").value)\r\n        threadgeshu = Math.floor(document.getElementById(\"thread\").value)\r\n        document.getElementById(\"thread\").value = threadgeshu\r\n        document.title = document.title + \"-\" + \"线程数为\" + threadgeshu\r\n        myshurukuangneirong = myshurukuangneirong + \"线程数为\" + threadgeshu + \"\\n\";\r\n        myptext.value = myshurukuangneirong;\r\n        eventdata = \"圆周率计算\" + piwei + \"位\" + \"  \\n\" + \"计算圆周率中......\" + \"  \\n\";\r\n\r\n        myshurukuangneirong += String(eventdata);\r\n        myptext.value = myshurukuangneirong;\r\n        Decimal.precision = piwei;\r\n\r\n        strt = new Date().getTime();\r\n        p = new Decimal(0);\r\n\r\n        myworker = []\r\n        myworker.length = threadgeshu;\r\n\r\n        finishflag = []\r\n        finishflag.length = threadgeshu;\r\n        var worker1;\r\n        if (typeof (worker1) == \"undefined\") {\r\n            worker1 = new Worker(\"mythread1.js\")\r\n        }\r\n\r\n        for (var i = 0, len = threadgeshu; i < len; i++) {\r\n            myworker[i] = worker1;\r\n        }\r\n\r\n        myworker.forEach(function(currentValue, index, arr) {\r\n\r\n            arr[index] = undefined;\r\n\r\n            arr[index] = new Worker(\"mythread1.js\")\r\n            arr[index].postMessage([piwei, threadgeshu, index]);\r\n            arr[index].onmessage = function(event) {\r\n                console.log(\"主线程从副线程\" + (index + 1) + \"接收\" + \"event.data\\n\" + event.data);\r\n                var p1 = new Decimal(event.data[0]);\r\n                p = Decimal.add(p, p1);\r\n                x = Math.max(x, parseInt(event.data[1]))\r\n                finishflag[index] = 1;\r\n                threadfinish()\r\n            }\r\n            ;\r\n\r\n        });\r\n\r\n    } else {\r\n        alert(\"输入错误\")\r\n        document.getElementById(\"pichangwei\").value = null\r\n        document.getElementById(\"thread\").value = null\r\n    }\r\n\r\n}\r\n\r\nfunction threadfinish() {\r\n\r\n    if (threadgeshu == finishflag.filter(function(currentValue) {\r\n        return currentValue == 1;\r\n\r\n    }).length) {\r\n        endt = new Date().getTime();\r\n        durt = (endt - strt) / 1000;\r\n\r\n        eventdata = \"计算完成,用时\" + durt + \"秒第\" + x + \"次  \\n\" + \"圆周率\" + piwei + \"位\" + \"  \\n\" + p + \"  \\n\";\r\n        myptext = document.getElementById(\"tp\");\r\n        myshurukuangneirong += String(eventdata);\r\n        myptext.value = myshurukuangneirong;\r\n        jisuanfinishflag = 1;\r\n        myworker.forEach(function(currentValue, index, arr) {\r\n            arr[index].terminate()\r\n        })\r\n        x = 0\r\n\t\t//alert(\"ok\")\r\n\t\tsetTimeout(function() {\r\n            myptext.style.height = myptext.scrollHeight + 'px';\r\n        }, 0);\r\n\t\t \r\n    }\r\n}\r\n"]}